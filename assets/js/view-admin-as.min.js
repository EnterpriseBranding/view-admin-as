;/**
 * View Admin As
 * https://wordpress.org/plugins/view-admin-as/
 *
 * @author  Jory Hogeveen <info@keraweb.nl>
 * @package view-admin-as
 * @since   0.1
 * @version 1.6.x
 * @preserve
 */
if("undefined"===typeof VAA_View_Admin_As){var VAA_View_Admin_As={siteurl:"",view:false,view_types:["user","role","caps","visitor"],_debug:false,_vaa_nonce:"",__no_users_found:"No users found.",__success:"Success",__confirm:"Are you sure?"}}(function($){var $document=$(document),$window=$(window),$body=$("body");VAA_View_Admin_As.prefix="#wpadminbar #wp-admin-bar-vaa ";VAA_View_Admin_As.root="#wp-admin-bar-vaa";VAA_View_Admin_As.maxHeightListenerElements=$(VAA_View_Admin_As.prefix+" .max-height-listener");if(!VAA_View_Admin_As.hasOwnProperty("_debug")){VAA_View_Admin_As._debug=0}VAA_View_Admin_As._debug=parseInt(VAA_View_Admin_As._debug,10);if(!VAA_View_Admin_As.hasOwnProperty("ajaxurl")&&"undefined"!==typeof ajaxurl){VAA_View_Admin_As.ajaxurl=ajaxurl}VAA_View_Admin_As._touchmove=false;$document.on("touchmove",function(){VAA_View_Admin_As._touchmove=true});$document.on("touchstart",function(){VAA_View_Admin_As._touchmove=false});VAA_View_Admin_As.init=function(){VAA_View_Admin_As.init_caps();VAA_View_Admin_As.init_users();VAA_View_Admin_As.init_settings();VAA_View_Admin_As.init_module_role_defaults();VAA_View_Admin_As.init_module_role_manager();$window.on("load",function(){$(VAA_View_Admin_As.prefix+".ab-vaa-toggle").each(function(){var toggleContent=$(this).parent().children().not(".ab-vaa-toggle");if(!$(this).hasClass("active")){toggleContent.hide()}$(this).on("click touchend",function(e){e.preventDefault();e.stopPropagation();if(true===VAA_View_Admin_As._touchmove){return}if($(this).hasClass("active")){toggleContent.slideUp("fast");$(this).removeClass("active")}else{toggleContent.slideDown("fast");$(this).addClass("active")}VAA_View_Admin_As.autoMaxHeight()});$(this).on("keyup",function(e){e.preventDefault();var key=parseInt(e.which,10);if($(this).hasClass("active")&&(13===key||32===key||38===key)){toggleContent.slideUp("fast");$(this).removeClass("active")}else if(13===key||32===key||40===key){toggleContent.slideDown("fast");$(this).addClass("active")}VAA_View_Admin_As.autoMaxHeight()})});$(VAA_View_Admin_As.prefix+".ab-vaa-showhide[data-showhide]").each(function(){$($(this).attr("data-showhide")).hide();$(this).on("mouseenter",function(){$($(this).attr("data-showhide")).slideDown("fast")}).on("mouseleave",function(){$($(this).attr("data-showhide")).slideUp("fast")})});$(VAA_View_Admin_As.prefix+".ab-vaa-conditional[data-condition-target]").each(function(){var $this=$(this),$target=$($this.attr("data-condition-target")),$compare=$this.attr("data-condition");$this.hide();$target.on("change",function(){if($compare===$target.val()){$this.slideDown("fast")}else{$this.slideUp("fast")}VAA_View_Admin_As.autoMaxHeight()})})});$document.on("click touchend",VAA_View_Admin_As.prefix+".vaa-reset-item > .ab-item",function(e){e.preventDefault();if(true===VAA_View_Admin_As._touchmove){return}if("vaa_reload"===$("button",this).attr("name")){window.location.reload()}else{VAA_View_Admin_As.ajax({reset:true},true);return false}});$.each(VAA_View_Admin_As.view_types,function(index,type){$document.on("click touchend",VAA_View_Admin_As.prefix+".vaa-"+type+"-item > a.ab-item",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();if(!$(this).parent().hasClass("not-a-view")){var view_data={};view_data[type]=String($(this).attr("rel"));VAA_View_Admin_As.ajax(view_data,true);return false}})});$document.on("click touchend",VAA_View_Admin_As.prefix+".ab-item > .remove",function(e){e.preventDefault();if(true===VAA_View_Admin_As._touchmove){return}$(this).parent(".ab-item").slideUp("fast",function(){$(this).remove()})})};VAA_View_Admin_As.ajax=function(data,refresh){var body=$("body");$(".vaa-notice","#wpadminbar").remove();body.append('<div id="vaa-overlay"><span class="vaa-loader-icon" style="background: transparent url('+VAA_View_Admin_As.siteurl+'/wp-includes/images/spinner-2x.gif) center center no-repeat; background-size: contain;"></span></div>');$("body #vaa-overlay").fadeIn("fast");var post_data={action:"view_admin_as",_vaa_nonce:VAA_View_Admin_As._vaa_nonce,view_admin_as:JSON.stringify(data)};var isView=false;$.each(VAA_View_Admin_As.view_types,function(index,type){if("undefined"!==typeof data[type]){isView=true;return true}});if($(VAA_View_Admin_As.prefix+"#vaa-settings-view-mode-single").is(":checked")&&isView){body.append('<form id="vaa_single_mode_form" style="display:none;" method="post"></form>');var form=$("#vaa_single_mode_form");form.append('<input type="hidden" name="action" value="'+post_data.action+'">');form.append('<input type="hidden" name="_vaa_nonce" value="'+post_data._vaa_nonce+'">');form.append('<input id="data" type="hidden" name="view_admin_as">');form.find("#data").val(post_data.view_admin_as);form.submit()}else{$.post(VAA_View_Admin_As.ajaxurl,post_data,function(response){var success=response.hasOwnProperty("success")&&true===response.success,data={},display=false;if(1===VAA_View_Admin_As._debug){console.log(response)}if(response.hasOwnProperty("data")){if("object"===typeof response.data){data=response.data}display=data.hasOwnProperty("display")?data.display:display}if(success){if(refresh){VAA_View_Admin_As.refresh(data);return}else{if(!data.hasOwnProperty("text")){data.text=VAA_View_Admin_As.__success}}}if(!data.hasOwnProperty("type")){if(success){data.type="success"}else{data.type="error"}}if("popup"===display){VAA_View_Admin_As.popup(data,data.type)}else{if(!data.hasOwnProperty("text")){data.text=response.data}VAA_View_Admin_As.notice(String(data.text),data.type);$("body #vaa-overlay").addClass(data.type).fadeOut("fast",function(){$(this).remove()})}})}};VAA_View_Admin_As.refresh=function(data){if(data.hasOwnProperty("redirect")){window.location.replace(String(data.redirect))}else{window.location.hash="";window.location.reload()}};VAA_View_Admin_As.notice=function(notice,type){var root="#wpadminbar .vaa-notice";$("#wp-admin-bar-top-secondary").append('<li class="vaa-notice vaa-'+type+'"><span class="remove ab-icon dashicons dashicons-dismiss" style="top: 2px;"></span>'+notice+"</li>");$(root+" .remove").click(function(){$(this).parent().remove()});setTimeout(function(){$(root).fadeOut("fast",function(){$(this).remove()})},5e3)};VAA_View_Admin_As.popup=function(data,type){var root="body #vaa-overlay";$(root).html('<div class="vaa-overlay-container vaa-'+type+'"><span class="remove dashicons dashicons-dismiss"></span><div class="vaa-response-data"></div></div>');if("object"!==typeof data){data={text:data}}if(data.hasOwnProperty("text")){$(root+" .vaa-response-data").append("<p>"+String(data.text)+"</p>")}if(data.hasOwnProperty("list")){$(root+" .vaa-response-data").append("<ul></ul>");data.list.forEach(function(item){$(root+" .vaa-response-data ul").append("<li>"+String(item)+"</li>")})}if(data.hasOwnProperty("textarea")){$(root+" .vaa-response-data").append('<textarea style="width: 100%;" readonly>'+String(data.textarea)+"</textarea>");$(root+" .vaa-response-data textarea").click(function(){$(this).select()})}$(root+" .vaa-overlay-container .remove").click(function(){$(root).fadeOut("fast",function(){$(this).remove()})});$document.mouseup(function(e){$(root+" .vaa-overlay-container").each(function(){if(!$(this).is(e.target)&&0===$(this).has(e.target).length){$(root).fadeOut("fast",function(){$(this).remove()})}})})};VAA_View_Admin_As.init_settings=function(){var root=VAA_View_Admin_As.root+"-settings",prefix="vaa-settings",root_prefix=VAA_View_Admin_As.prefix+root;$document.on("change",root_prefix+"-admin-menu-location select#"+prefix+"-admin-menu-location",function(e){e.preventDefault();var val=$(this).val();if(val&&""!==val){var view_data={user_setting:{admin_menu_location:val}};VAA_View_Admin_As.ajax(view_data,true)}});$document.on("change",root_prefix+"-view-mode input.radio."+prefix+"-view-mode",function(e){e.preventDefault();var val=$(this).val();if(val&&""!==val){var view_data={user_setting:{view_mode:val}};VAA_View_Admin_As.ajax(view_data,false)}});$document.on("change",root_prefix+"-force-group-users input#"+prefix+"-force-group-users",function(e){e.preventDefault();var view_data={user_setting:{force_group_users:"no"}};if(this.checked){view_data={user_setting:{force_group_users:"yes"}}}VAA_View_Admin_As.ajax(view_data,true)});$document.on("change",root_prefix+"-hide-front input#"+prefix+"-hide-front",function(e){e.preventDefault();var view_data={user_setting:{hide_front:"no"}};if(this.checked){view_data={user_setting:{hide_front:"yes"}}}VAA_View_Admin_As.ajax(view_data,false)});$document.on("change",root_prefix+"-freeze-locale input#"+prefix+"-freeze-locale",function(e){e.preventDefault();var view_data={user_setting:{freeze_locale:"no"}};if(this.checked){view_data={user_setting:{freeze_locale:"yes"}}}var reload=false;if("object"===typeof VAA_View_Admin_As.view&&"undefined"!==typeof VAA_View_Admin_As.view.user){reload=true}VAA_View_Admin_As.ajax(view_data,reload)})};VAA_View_Admin_As.init_users=function(){var root=VAA_View_Admin_As.root+"-users",root_prefix=VAA_View_Admin_As.prefix+root;$document.on("keyup",root_prefix+" .ab-vaa-search.search-users input",function(){$(VAA_View_Admin_As.prefix+" .ab-vaa-search #vaa-searchuser-results").empty();if(1<=$(this).val().length){var inputText=$(this).val();$(VAA_View_Admin_As.prefix+".vaa-user-item").each(function(){var name=$(".ab-item",this).text();if(-1<name.toLowerCase().indexOf(inputText.toLowerCase())){var exists=false;$(VAA_View_Admin_As.prefix+".ab-vaa-search #vaa-searchuser-results .vaa-user-item .ab-item").each(function(){if(-1<$(this).text().indexOf(name)){exists=$(this)}});var role=$(this).parents(".vaa-role-item").children(".ab-item").attr("rel");if(false!==exists&&exists.length){exists.find(".user-role").text(exists.find(".user-role").text().replace(")",", "+role+")"))}else{$(this).clone().appendTo(VAA_View_Admin_As.prefix+".ab-vaa-search #vaa-searchuser-results").children(".ab-item").append(' &nbsp; <span class="user-role">('+role+")</span>")}}});if(""===$.trim($(VAA_View_Admin_As.prefix+".ab-vaa-search #vaa-searchuser-results").html())){$(VAA_View_Admin_As.prefix+".ab-vaa-search #vaa-searchuser-results").append('<div class="ab-item ab-empty-item vaa-not-found">'+VAA_View_Admin_As.__no_users_found+"</div>")}}})};VAA_View_Admin_As.init_caps=function(){var root=VAA_View_Admin_As.root+"-caps",root_prefix=VAA_View_Admin_As.prefix+root;VAA_View_Admin_As.caps_filter_settings={selectedRole:"default",selectedRoleCaps:{},selectedRoleReverse:false,filterString:""};VAA_View_Admin_As.filter_capabilities=function(){var reverse=true===VAA_View_Admin_As.caps_filter_settings.selectedRoleReverse,isDefault="default"===VAA_View_Admin_As.caps_filter_settings.selectedRole,filterString=VAA_View_Admin_As.caps_filter_settings.filterString;$(root_prefix+"-select-options .vaa-cap-item").each(function(){var $this=$(this),exists=$("input",this).attr("value")in VAA_View_Admin_As.caps_filter_settings.selectedRoleCaps,name;$this.hide();if(reverse||exists||isDefault){if(1<=filterString.length){name=$this.text();if(-1<name.toLowerCase().indexOf(filterString.toLowerCase())){$this.show()}}else{$this.show()}if(reverse&&exists&&!isDefault){$this.hide()}}})};VAA_View_Admin_As.get_selected_capabilities=function(){var capabilities={};$(root_prefix+"-select-options .vaa-cap-item input").each(function(){if($(this).is(":checked")){capabilities[$(this).attr("value")]=1}else{capabilities[$(this).attr("value")]=0}});return capabilities};VAA_View_Admin_As.set_selected_capabilities=function(capabilities){$(root_prefix+"-select-options .vaa-cap-item input").each(function(){if(capabilities.hasOwnProperty($(this).attr("value"))){if(capabilities[$(this).attr("value")]){$(this).attr("checked","checked")}else{$(this).attr("checked",false)}}else{$(this).attr("checked",false)}})};$document.on("mouseenter",root_prefix+"-manager",function(){VAA_View_Admin_As.autoMaxHeight()});$document.on("click",root_prefix+" #open-caps-popup",function(){$(VAA_View_Admin_As.prefix).addClass("fullPopupActive");$(root_prefix+"-manager > .ab-sub-wrapper").addClass("fullPopup");VAA_View_Admin_As.autoMaxHeight()});$document.on("click",root_prefix+" #close-caps-popup",function(){$(VAA_View_Admin_As.prefix).removeClass("fullPopupActive");$(root_prefix+"-manager > .ab-sub-wrapper").removeClass("fullPopup");VAA_View_Admin_As.autoMaxHeight()});$document.on("change",root_prefix+" .ab-vaa-select.select-role-caps select",function(){VAA_View_Admin_As.caps_filter_settings.selectedRole=$(this).val();if("default"===VAA_View_Admin_As.caps_filter_settings.selectedRole){VAA_View_Admin_As.caps_filter_settings.selectedRoleCaps={};VAA_View_Admin_As.caps_filter_settings.selectedRoleReverse=false}else{var selectedRoleElement=$(root_prefix+'-selectrolecaps #vaa-caps-selectrolecaps option[value="'+VAA_View_Admin_As.caps_filter_settings.selectedRole+'"]');VAA_View_Admin_As.caps_filter_settings.selectedRoleCaps=JSON.parse(selectedRoleElement.attr("data-caps"));VAA_View_Admin_As.caps_filter_settings.selectedRoleReverse=1===parseInt(selectedRoleElement.attr("data-reverse"),10)}VAA_View_Admin_As.filter_capabilities()});$document.on("keyup",root_prefix+" .ab-vaa-filter input",function(){VAA_View_Admin_As.caps_filter_settings.filterString=$(this).val();VAA_View_Admin_As.filter_capabilities()});$document.on("click touchend",root_prefix+" button#select-all-caps",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();$(root_prefix+"-select-options .vaa-cap-item").each(function(){if($(this).is(":visible")){$("input",this).prop("checked",true)}});return false});$document.on("click touchend",root_prefix+" button#deselect-all-caps",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();$(root_prefix+"-select-options .vaa-cap-item").each(function(){if($(this).is(":visible")){$("input",this).prop("checked",false)}});return false});$document.on("click touchend",root_prefix+" button#apply-caps-view",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var newCaps=VAA_View_Admin_As.get_selected_capabilities();VAA_View_Admin_As.ajax({caps:newCaps},true);return false})};VAA_View_Admin_As.init_module_role_defaults=function(){var root=VAA_View_Admin_As.root+"-settings",prefix="vaa-settings",root_prefix=VAA_View_Admin_As.prefix+root;$document.on("change",root_prefix+"-role-defaults-enable input#"+prefix+"-role-defaults-enable",function(e){e.preventDefault();var view_data={role_defaults:{enable:0}};if(this.checked){view_data={role_defaults:{enable:true}}}VAA_View_Admin_As.ajax(view_data,true)});root=VAA_View_Admin_As.root+"-role-defaults";prefix="vaa-role-defaults";root_prefix=VAA_View_Admin_As.prefix+root;$document.on("change",root_prefix+"-setting-register-enable input#"+prefix+"-setting-register-enable",function(e){e.preventDefault();var view_data={role_defaults:{apply_defaults_on_register:0}};if(this.checked){view_data={role_defaults:{apply_defaults_on_register:true}}}VAA_View_Admin_As.ajax(view_data,false)});$document.on("change",root_prefix+"-setting-disable-user-screen-options input#"+prefix+"-setting-disable-user-screen-options",function(e){e.preventDefault();var view_data={role_defaults:{disable_user_screen_options:0}};if(this.checked){view_data={role_defaults:{disable_user_screen_options:true}}}VAA_View_Admin_As.ajax(view_data,false)});$document.on("change",root_prefix+"-setting-lock-meta-boxes input#"+prefix+"-setting-lock-meta-boxes",function(e){e.preventDefault();var view_data={role_defaults:{lock_meta_boxes:0}};if(this.checked){view_data={role_defaults:{lock_meta_boxes:true}}}VAA_View_Admin_As.ajax(view_data,false)});$document.on("click touchend",root_prefix+"-meta-add button#"+prefix+"-meta-add",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(root_prefix+"-meta-add input#"+prefix+"-meta-new").val();var item=$(root_prefix+"-meta-add #"+prefix+"-meta-template").html().toString();item=item.replace(/vaa_new_item/g,val.replace(/ /g,"_"));$(root_prefix+"-meta-select > .ab-item").prepend(item)});$document.on("click touchend",root_prefix+"-meta-apply button#"+prefix+"-meta-apply",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val={};$(root_prefix+"-meta-select .ab-item.vaa-item input").each(function(){val[$(this).val()]=$(this).is(":checked")});if(val){var view_data={role_defaults:{update_meta:val}};VAA_View_Admin_As.ajax(view_data,false)}return false});$document.on("keyup",root_prefix+"-bulk-users-filter input#"+prefix+"-bulk-users-filter",function(e){e.preventDefault();if(1<=$(this).val().length){var inputText=$(this).val();$(root_prefix+"-bulk-users-select .ab-item.vaa-item").each(function(){var name=$(".user-name",this).text();if(-1<name.toLowerCase().indexOf(inputText.toLowerCase())){$(this).show()}else{$(this).hide()}})}else{$(root_prefix+"-bulk-users-select .ab-item.vaa-item").each(function(){$(this).show()})}});$document.on("click touchend",root_prefix+"-bulk-users-apply button#"+prefix+"-bulk-users-apply",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=[];$(root_prefix+"-bulk-users-select .ab-item.vaa-item input").each(function(){if($(this).is(":checked")){val.push($(this).val())}});if(val){var view_data={role_defaults:{apply_defaults_to_users:val}};VAA_View_Admin_As.ajax(view_data,false)}return false});$document.on("click touchend",root_prefix+"-bulk-roles-apply button#"+prefix+"-bulk-roles-apply",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(root_prefix+"-bulk-roles-select select#"+prefix+"-bulk-roles-select").val();if(val&&""!==val){var view_data={role_defaults:{apply_defaults_to_users_by_role:val}};VAA_View_Admin_As.ajax(view_data,false)}return false});$document.on("click touchend",root_prefix+"-clear-roles-apply button#"+prefix+"-clear-roles-apply",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(root_prefix+"-clear-roles-select select#"+prefix+"-clear-roles-select").val();if(val&&""!==val){var view_data={role_defaults:{clear_role_defaults:val}};if(confirm(VAA_View_Admin_As.__confirm)){VAA_View_Admin_As.ajax(view_data,false)}}return false});$document.on("click touchend",root_prefix+"-export-roles-export button#"+prefix+"-export-roles-export",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(root_prefix+"-export-roles-select select#"+prefix+"-export-roles-select").val();if(val&&""!==val){var view_data={role_defaults:{export_role_defaults:val}};VAA_View_Admin_As.ajax(view_data,false)}return false});$document.on("click touchend",root_prefix+"-import-roles-import button.vaa-import-role-defaults",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(root_prefix+"-import-roles-input textarea#"+prefix+"-import-roles-input").val();if(val&&""!==val){try{val=JSON.parse(val);var view_data={role_defaults:{import_role_defaults:val}};if($(this).attr("data-method")){view_data.role_defaults.import_role_defaults_method=String($(this).attr("data-method"))}VAA_View_Admin_As.ajax(view_data,false)}catch(err){alert(err)}}return false})};VAA_View_Admin_As.init_module_role_manager=function(){var root=VAA_View_Admin_As.root+"-settings",prefix="vaa-settings",root_prefix=VAA_View_Admin_As.prefix+root;$document.on("change",root_prefix+"-role-manager-enable input#"+prefix+"-role-manager-enable",function(e){e.preventDefault();var view_data={role_manager:{enable:0}};if(this.checked){view_data={role_manager:{enable:true}}}VAA_View_Admin_As.ajax(view_data,true)});root=VAA_View_Admin_As.root+"-role-manager";prefix="vaa-role-manager";root_prefix=VAA_View_Admin_As.prefix+root;$document.on("click touchend",root_prefix+"-clone-apply button#"+prefix+"-clone-apply",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var role=$(root_prefix+"-clone-select select#"+prefix+"-clone-select").val();var new_role=$(root_prefix+"-clone-input input#"+prefix+"-clone-input").val();if(role&&""!==role&&new_role&&""!==new_role){var view_data={role_manager:{clone_role:{role:role,new_role:new_role}}};VAA_View_Admin_As.ajax(view_data,true)}return false});$document.on("click touchend",root_prefix+"-delete-apply button#"+prefix+"-delete-apply",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(root_prefix+"-delete-select select#"+prefix+"-delete-select").val();if(val&&""!==val){var view_data={role_manager:{delete_role:val}};VAA_View_Admin_As.ajax(view_data,true)}return false});var caps_root=VAA_View_Admin_As.root+"-caps-manager-role-manager",caps_prefix="vaa-caps-manager-role-manager",caps_root_prefix=VAA_View_Admin_As.prefix+caps_root;$document.on("change",caps_root_prefix+" select#"+caps_prefix+"-edit-role",function(){var $this=$(this),role=$this.val(),caps={},selectedRoleElement=$(caps_root_prefix+" select#"+caps_prefix+'-edit-role option[value="'+role+'"]');if(selectedRoleElement.attr("data-caps")){caps=JSON.parse(selectedRoleElement.attr("data-caps"))}VAA_View_Admin_As.caps_filter_settings.selectedRole="default";VAA_View_Admin_As.caps_filter_settings.selectedRoleCaps={};VAA_View_Admin_As.caps_filter_settings.selectedRoleReverse=false;VAA_View_Admin_As.filter_capabilities();VAA_View_Admin_As.set_selected_capabilities(caps)});$document.on("click touchend",caps_root_prefix+" button#"+caps_prefix+"-save-role",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var role=$(caps_root_prefix+" select#"+caps_prefix+"-edit-role").val(),refresh=false;if(!role){return false}if("__new__"===role){role=$(caps_root_prefix+" input#"+caps_prefix+"-new-role").val()}var data={role:role,capabilities:VAA_View_Admin_As.get_selected_capabilities()};VAA_View_Admin_As.ajax({role_manager:{save_role:data}},refresh);return false});$document.on("click touchend",caps_root_prefix+"-new-cap button#"+caps_prefix+"-add-cap",function(e){if(true===VAA_View_Admin_As._touchmove){return}e.preventDefault();var val=$(caps_root_prefix+"-new-cap input#"+caps_prefix+"-new-cap").val();var item=$(caps_root_prefix+"-new-cap #"+caps_prefix+"-cap-template").html().toString();item=item.replace(/vaa_new_item/g,val.replace(/ /g,"_"));console.log(item);$(VAA_View_Admin_As.root+"-caps-select-options > .ab-item").prepend(item)})};VAA_View_Admin_As.autoMaxHeight=function(){setTimeout(function(){VAA_View_Admin_As.maxHeightListenerElements.each(function(){var element=$(this),count=0,wait=setInterval(function(){var offset=element.offset(),scrollTop="undefined"!==typeof window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,offsetTop=offset.top-scrollTop;if(element.is(":visible")&&0<offsetTop){clearInterval(wait);var maxHeight=$window.height()-offsetTop-100;maxHeight=100<maxHeight?maxHeight:100;element.css({"max-height":maxHeight+"px"})}count++;if(5<count){clearInterval(wait)}},100)})},100)};$document.on("resize",VAA_View_Admin_As.autoMaxHeight);if("undefined"!==typeof VAA_View_Admin_As._vaa_nonce){VAA_View_Admin_As.init()}})(jQuery);